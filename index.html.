<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SANKHYA: The Final Audit</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Space+Grotesk:wght@300;500;700&display=swap" rel="stylesheet">

    <style>
        /* --- CUSTOM CYBER-VEDIC STYLES --- */
        body { 
            background-color: #000; 
            font-family: 'Space Grotesk', sans-serif; 
            overflow: hidden; /* Prevent scrolling like an app */
            touch-action: manipulation;
        }
        
        .vedic-font { font-family: 'Cinzel', serif; }
        
        /* The Glitch Effect for the Devil */
        .glitch-text {
            position: relative;
            animation: glitch 1s infinite;
        }
        @keyframes glitch {
            0% { text-shadow: 2px 2px #ff0000; }
            50% { text-shadow: -2px -2px #00ffff; }
            100% { text-shadow: 2px 2px #ff0000; }
        }

        /* Pulse Animation for Buttons */
        .pulse-glow {
            box-shadow: 0 0 0 0 rgba(0, 255, 0, 0.7);
            animation: pulsing 2s infinite cubic-bezier(0.66, 0, 0, 1);
        }
        @keyframes pulsing {
            to { box-shadow: 0 0 0 20px rgba(0, 255, 0, 0); }
        }

        /* Custom Range Slider */
        input[type=range] {
            -webkit-appearance: none;
            background: transparent;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 24px;
            width: 24px;
            border-radius: 50%;
            background: #ffffff;
            border: 2px solid #000;
            margin-top: -10px;
            box-shadow: 0 0 10px #ffffff;
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 4px;
            background: #333;
            border-radius: 2px;
        }

        /* Slide Transitions */
        .slide-enter { animation: slideIn 0.5s ease-out forwards; }
        @keyframes slideIn { from { opacity: 0; transform: translateY(50px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Glassmorphism Cards */
        .glass-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
    </style>
</head>
<body class="text-white h-screen flex flex-col">

    <div id="view-home" class="flex-1 flex flex-col items-center justify-center p-6 relative z-10">
        <div class="absolute top-0 left-0 w-full h-full bg-gradient-to-b from-green-900/20 to-black z-[-1]"></div>

        <div class="mb-8 text-center">
            <h2 class="text-green-500 tracking-[0.5em] text-xs font-bold mb-2 animate-pulse">SYSTEM ONLINE</h2>
            <h1 class="vedic-font text-6xl font-black text-white mb-2 drop-shadow-[0_0_15px_rgba(0,255,0,0.5)]">SANKHYA</h1>
            <p class="text-gray-400 text-sm tracking-widest">ECO-KARMA AUDIT PROTOCOL</p>
        </div>

        <div class="glass-card p-6 rounded-2xl w-full max-w-sm text-center mb-12 border-l-4 border-green-500">
            <p class="text-lg leading-relaxed">
                "We do not inherit the Earth from our ancestors; we borrow it from our children."
            </p>
        </div>

        <button onclick="switchView('input')" class="w-full max-w-xs bg-white text-black font-bold py-4 rounded-full text-xl pulse-glow hover:scale-105 transition-transform flex items-center justify-center gap-2">
            START AUDIT <i data-lucide="arrow-right"></i>
        </button>

        <div class="absolute bottom-6 text-center w-full">
            <p class="text-[10px] text-gray-500 uppercase tracking-widest">Developed by</p>
            <p class="text-xs font-bold text-gray-300">Department of Statistics</p>
            <p class="text-[10px] text-green-500 font-bold">NLU (National Law University)</p>
        </div>
    </div>


    <div id="view-input" class="hidden flex-1 flex flex-col p-6 overflow-y-auto">
        <div class="flex items-center justify-between mb-8">
            <h2 class="vedic-font text-2xl">YOUR DATA</h2>
            <div class="text-xs text-green-500 border border-green-500 px-2 py-1 rounded">SECURE</div>
        </div>

        <div class="space-y-8 pb-20">
            <div class="space-y-2">
                <label class="text-xs text-gray-400 uppercase tracking-wider">Identity</label>
                <input type="text" id="inp-name" placeholder="Enter your name..." class="w-full bg-transparent border-b border-gray-700 text-2xl py-2 focus:outline-none focus:border-green-500 transition-colors">
            </div>

            <div class="space-y-4">
                <div class="flex justify-between items-end">
                    <label class="text-gray-300 flex items-center gap-2"><i data-lucide="car"></i> Car Usage</label>
                    <span class="text-green-400 font-mono text-xl"><span id="val-car">0</span> km/day</span>
                </div>
                <input type="range" id="inp-car" min="0" max="100" value="0" oninput="updateVal('car', this.value)">
                
                <div class="flex justify-between items-end mt-4">
                    <label class="text-gray-300 flex items-center gap-2"><i data-lucide="bike"></i> Bike Usage</label>
                    <span class="text-green-400 font-mono text-xl"><span id="val-bike">0</span> km/day</span>
                </div>
                <input type="range" id="inp-bike" min="0" max="50" value="0" oninput="updateVal('bike', this.value)">
            </div>

            <div class="space-y-4">
                <div class="flex justify-between items-end">
                    <label class="text-gray-300 flex items-center gap-2"><i data-lucide="zap"></i> Monthly Bill</label>
                    <span class="text-green-400 font-mono text-xl">‚Çπ<span id="val-elec">0</span></span>
                </div>
                <input type="range" id="inp-elec" min="0" max="15000" step="100" value="0" oninput="updateVal('elec', this.value)">
            </div>

            <div class="space-y-3">
                <label class="text-xs text-gray-400 uppercase tracking-wider">Dietary Source</label>
                <div class="grid grid-cols-3 gap-2">
                    <button onclick="setDiet('vegan', this)" class="diet-btn p-3 rounded-lg border border-gray-700 text-gray-400 hover:border-green-500">üå± Vegan</button>
                    <button onclick="setDiet('veg', this)" class="diet-btn p-3 rounded-lg border border-green-500 bg-green-900/20 text-white font-bold">ü•ö Veg</button>
                    <button onclick="setDiet('nonveg', this)" class="diet-btn p-3 rounded-lg border border-gray-700 text-gray-400 hover:border-red-500">üçó Meat</button>
                </div>
            </div>

            <div class="flex items-center justify-between p-4 glass-card rounded-xl">
                <div class="flex items-center gap-3">
                    <i data-lucide="snowflake" class="text-blue-400"></i>
                    <span>AC Used Daily?</span>
                </div>
                <input type="checkbox" id="inp-ac" class="w-6 h-6 accent-blue-500 rounded">
            </div>
        </div>

        <button onclick="calculateAndShow()" class="fixed bottom-6 left-6 right-6 bg-green-600 text-white font-bold py-4 rounded-xl text-lg shadow-lg shadow-green-900/50 z-50">
            REVEAL MY KARMA
        </button>
    </div>


    <div id="view-result" class="hidden flex-1 flex flex-col relative overflow-hidden">
        
        <div id="result-bg" class="absolute top-0 left-0 w-full h-full bg-gradient-to-t from-black via-gray-900 to-black transition-colors duration-1000"></div>

        <div class="relative z-10 flex flex-col h-full p-6 text-center">
            
            <div class="mt-8 mb-6 flex justify-center">
                <div id="devil-face" class="text-8xl transition-all duration-700 transform hover:scale-110 drop-shadow-2xl">
                    üòê
                </div>
            </div>

            <h2 id="rank-title" class="vedic-font text-4xl font-bold mb-2 text-white">CALCULATING...</h2>
            <p id="roast-text" class="text-gray-300 italic mb-8 min-h-[60px]">"Analyzing your ecological debt..."</p>

            <div class="grid grid-cols-2 gap-4 mb-6">
                <div class="glass-card p-4 rounded-xl">
                    <div id="tree-count" class="text-4xl font-black text-red-500">0</div>
                    <div class="text-[10px] uppercase text-gray-400">Trees Owed</div>
                </div>
                <div class="glass-card p-4 rounded-xl">
                    <div id="score-val" class="text-4xl font-black text-white">850</div>
                    <div class="text-[10px] uppercase text-gray-400">Karma Score</div>
                </div>
            </div>

            <div class="glass-card p-4 rounded-xl border-l-2 border-yellow-500 text-left mb-6">
                <p id="gita-text" class="vedic-font text-yellow-100 text-sm leading-relaxed mb-2">...</p>
                <p id="gita-source" class="text-[10px] text-yellow-500 uppercase font-bold">BHAGAVAD GITA</p>
            </div>

            <div class="mt-auto space-y-3">
                <button onclick="shareResult()" class="w-full bg-white text-black font-bold py-3 rounded-lg flex items-center justify-center gap-2">
                    <i data-lucide="share-2" size="18"></i> SHARE MY SHAME
                </button>
                <button onclick="location.reload()" class="w-full glass-card text-gray-400 font-bold py-3 rounded-lg">
                    AUDIT SOMEONE ELSE
                </button>
            </div>
            
            <p class="mt-4 text-[10px] text-gray-600">Based on IPCC & CEA (Govt of India) Data</p>
        </div>
    </div>

    <script>
        lucide.createIcons();
        
        let selectedDiet = 'veg';

        // GITA QUOTES DATABASE
        const GITA_QUOTES = [
            { t: "He who enjoys nature's gifts without giving back is certainly a thief.", s: "3.12" },
            { t: "The spiritually minded eat food first offered in sacrifice; others eat only sin.", s: "3.13" },
            { t: "I am the taste in water, the light of the sun and the moon.", s: "7.8" },
            { t: "Time I am, the great destroyer of the worlds.", s: "11.32" },
            { t: "Material nature is the cause of all material causes and effects.", s: "13.21" }
        ];

        // NAVIGATION
        function switchView(viewName) {
            document.getElementById('view-home').classList.add('hidden');
            document.getElementById('view-input').classList.add('hidden');
            document.getElementById('view-result').classList.add('hidden');
            
            const view = document.getElementById('view-' + viewName);
            view.classList.remove('hidden');
            view.classList.add('slide-enter');
        }

        // INPUT HANDLING
        function updateVal(id, val) {
            document.getElementById('val-' + id).innerText = val;
        }

        function setDiet(type, btn) {
            selectedDiet = type;
            document.querySelectorAll('.diet-btn').forEach(b => {
                b.classList.remove('bg-green-900/20', 'text-white', 'border-green-500', 'font-bold');
                b.classList.add('text-gray-400', 'border-gray-700');
            });
            btn.classList.remove('text-gray-400', 'border-gray-700');
            btn.classList.add('bg-green-900/20', 'text-white', 'border-green-500', 'font-bold');
        }

        // THE CORE LOGIC (SAVAGE MATH)
        function calculateAndShow() {
            // 1. Get Data (Safe Default 0)
            const car = parseInt(document.getElementById('inp-car').value) || 0;
            const bike = parseInt(document.getElementById('inp-bike').value) || 0;
            const elec = parseInt(document.getElementById('inp-elec').value) || 0;
            const ac = document.getElementById('inp-ac').checked;

            // 2. Calculate Emissions (IPCC Factors)
            const carCO2 = car * 0.19 * 365;
            const bikeCO2 = bike * 0.08 * 365;
            const elecCO2 = (elec / 8) * 0.82 * 12;
            
            let dietCO2 = 620;
            if(selectedDiet === 'nonveg') dietCO2 = 1205;
            if(selectedDiet === 'vegan') dietCO2 = 365;

            const acCO2 = ac ? 1460 : 0;
            const total = carCO2 + bikeCO2 + elecCO2 + dietCO2 + acCO2;

            // 3. Savage Formula (Excess / 20)
            const SAFE_LIMIT = 1500;
            const excess = Math.max(0, total - SAFE_LIMIT);
            const trees = Math.ceil(excess / 20);
            const score = Math.max(0, 850 - (trees * 5));

            // 4. Update UI with Drama
            switchView('result');
            
            // Random Gita Quote
            const quote = GITA_QUOTES[Math.floor(Math.random() * GITA_QUOTES.length)];
            document.getElementById('gita-text').innerText = `"${quote.t}"`;
            document.getElementById('gita-source').innerText = `BHAGAVAD GITA ${quote.s}`;

            // Set Visuals based on Score
            const face = document.getElementById('devil-face');
            const bg = document.getElementById('result-bg');
            const title = document.getElementById('rank-title');
            const roast = document.getElementById('roast-text');
            const treeCount = document.getElementById('tree-count');
            const scoreVal = document.getElementById('score-val');

            // Apply Data
            treeCount.innerText = trees;
            scoreVal.innerText = score;

            // THE TRANSFORMATION LOGIC
            if(score >= 800) {
                // ANGEL MODE
                face.innerText = "üòá";
                title.innerText = "RANK S: PURITY";
                title.className = "vedic-font text-4xl font-bold mb-2 text-green-400";
                roast.innerText = "You breathe cleaner air than a Himalayan Monk.";
                bg.className = "absolute top-0 left-0 w-full h-full bg-gradient-to-t from-green-900 to-black";
            } else if (score >= 600) {
                // NPC MODE
                face.innerText = "üòê";
                title.innerText = "RANK B: AVERAGE";
                title.className = "vedic-font text-4xl font-bold mb-2 text-blue-400";
                roast.innerText = "You are painfully average. The planet is 'meh' about you.";
                bg.className = "absolute top-0 left-0 w-full h-full bg-gradient-to-t from-blue-900 to-black";
            } else {
                // DEMON MODE
                face.innerText = "üëø";
                face.classList.add('glitch-text'); // Add glitch effect
                title.innerText = "RANK F: DESTROYER";
                title.className = "vedic-font text-4xl font-bold mb-2 text-red-600 glitch-text";
                
                // Specific Insults
                if(ac) roast.innerText = "Your AC usage is personally melting the Antarctica.";
                else if(car > 30) roast.innerText = "You drive so much the oil companies want to sponsor you.";
                else roast.innerText = "You are single-handedly speed-running the apocalypse.";
                
                bg.className = "absolute top-0 left-0 w-full h-full bg-gradient-to-t from-red-900 via-red-950 to-black";
            }
        }

        function shareResult() {
            // Simple share simulation
            const name = document.getElementById('inp-name').value || "Someone";
            alert(`üì∏ SCREENSHOT THIS!\n\nUser: ${name}\nRank: ${document.getElementById('rank-title').innerText}\nTrees Owed: ${document.getElementById('tree-count').innerText}`);
        }
    </script>
</body>
</html>
